todo.html

<div id="body">

    <div id="main">

        <div id="first">

            <h3>Task List</h3>

            <div>
                <input type="text" placeholder="what do you have planned?" [(ngModel)]="text">
            </div>

            <button (click)="addtask()">Add task</button>

        </div>


        <div id="second">
            <h3>Tasks</h3>
            <div id="tasks" #tasks>
                <div *ngFor="let task of todo; let i=index">
                    <div  (keydown)="save(i,$event)">
                        {{task}} 
                    </div>
                    <div>
                        <button (click)="edit(i)">
                            edit
                        </button>
                        <button (click)="delete(i)">
                            delete
                        </button>
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>




todo.ts


import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';
import { DataService } from '../data.service';

@Component({
  selector: 'app-todo',
  templateUrl: './todo.component.html',
  styleUrls: ['./todo.component.css']
})
export class TodoComponent implements OnInit {

  constructor(private dataservice: DataService) {

  }

  ngOnInit(): void {
    this.dataservice.todo$.subscribe(val=>this.todo=val);
    // console.log(this.todo);
    
  }

  @ViewChild('tasks') tasks!:ElementRef;
  text!: string;
  todo:string[]=[];

  addtask() {
    
    
    this.dataservice.addtask(this.text);
    this.text="";
  }

   delete(i:number){
    this.dataservice.delete(i);
   }

   edit(i:number){
const taskelement=this.tasks.nativeElement.children[i].children[0];
taskelement.nextSibling.children[0].style.display='none';

taskelement.setAttribute('contenteditable','true');
taskelement.focus();
    
   }

save(i:number,event:any){
 console.log("save");
 
  if(event.keyCode==13){
    event.preventDefault();
    const edittask=event.target.innerText.trim();
    console.log(edittask);
    
  this.dataservice.edit(i,edittask);
  const taskelement=this.tasks.nativeElement.children[i];
taskelement.setAttribute('contenteditable','false');}
}
}



data.service


import { Injectable } from '@angular/core';
import { BehaviorSubject } from 'rxjs';

@Injectable({
  providedIn: 'root'
})
export class DataService {

  constructor() { }

  todo:string[]=[];

todo$=new BehaviorSubject(this.todo);

addtask(text:string){
  this.todo.push(text);
  console.log(this.todo);
  
}
delete(i:number){
  this.todo.splice(i,1);
}

edit(i:number,text:string){
  this.todo[i]=text;
  console.log(this.todo);
  
}
}



in this when click on edit and dont change anything and press enter then it not work edit not happend

