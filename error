import { Component } from '@angular/core';
import { FormArray, FormBuilder, Validators } from '@angular/forms';
import { Card } from 'src/model/card.model';
 
@Component({
  selector: 'app-editor',
  templateUrl: './editor.component.html',
  styleUrls: ['./editor.component.css']
})
export class EditorComponent {
  articleForm;
  cardId=1;
  card:Card={
    cardId: 0,
    authorId: 0,
    title: '',
    description: '',
    tags: [],
    date: '',
    likes: 0
  }
  constructor(private formbuilder: FormBuilder) {
    this.articleForm = this.formbuilder.group({
      title: ["", [Validators.required]],
      description: ["", [Validators.required]],
      tags:["",Validators.required] 
    })
  };



//   get title() {
//     return this.articleForm.get('title');
//   }
//   get description() {
//     return this.articleForm.get('description');
//   }
// get tags():FormArray{
//   return this.articleForm.get('tags') as FormArray;
// }

  onSubmit() {
   this.card.cardId=this.cardId;
   this.card.authorId=Number(localStorage.getItem('userid'));
   this.card.title=this.articleForm.value.title ?? "";
   this.card.description=this.articleForm.value.description ?? "";
   this.card.date=new Date().toISOString();
   this.card.tags=Array.isArray(this.articleForm.value.tags)?this.articleForm.value.tags as string[]:[];
   this.cardId++;
  }

  enter(event:any){
   if(event.key==="enter"){
    this.card.tags.push(this.articleForm.value.tags)
   }
  }
}
