app.html

<div class="items-wrapper">
    <app-card *ngFor="let item of visibleItems.items" [item]="item"></app-card>
  </div>
  
  <div class="pagination-wrapper">
    <app-pagination [page]="page" [pageSize]="pageSize" [total]="visibleItems.total" (pageemit)="pageemit($event)" (pagesizeemit)="pagesizeemit($event)" ></app-pagination>
  
    
  </div>

app.ts

import { Component, OnInit, ViewChild } from '@angular/core';
import { FormControl } from '@angular/forms';
import { Subscription } from 'rxjs';
import { PaginationComponent } from './pagination/pagination.component';

export interface PaginatedResponse<T> {
  items: T[];
  total: number;
}

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css']
})
export class AppComponent implements OnInit  {
  
  ngOnInit(): void {
   
    
    // console.log(this.page,this.pageSize);
    
  }

  page:number=1;
  pageSize:number=10;
  private readonly items = Array.from(Array(100).keys(), (item) => item + 1);

  public visibleItems: PaginatedResponse<number> = {
    items: this.items.slice(0, 10),
    total: this.items.length,
  };
pageemit(event:any){
  this.page=event;
  this.onPageChange();
}
pagesizeemit(event:any){
  this.pageSize=event;
  this.onPageChange();
}
  public onPageChange(): void {
    const startIndex = (this.page - 1) * this.pageSize;
console.log("startindex"+startIndex);
console.log("pagesize"+this.pageSize);

console.log("page"+this.page);

console.log("original items"+this.items);

    const items = this.items.slice(
      startIndex,
      startIndex + this.pageSize
    );
console.log("items"+items);

    this.visibleItems = { items, total: this.items.length };
  }
}





pagination.html

<div class="pagination">
    <button [disabled]="page === 1" (click)="selectPage(1)"><<</button>
    <button [disabled]="page === 1" (click)="selectPage(page - 1)">
      <
    </button>
    <button
      *ngFor="let page of visiblePages"
      
      (click)="selectPage(page)"
    >
      {{ page }}
    </button>
    <button
      [disabled]="page === totalPages"
      (click)="selectPage(page + 1)"
    >
      >
    </button>
    <button
      [disabled]="page === totalPages"
      (click)="selectPage(totalPages)"
    >
      >>
    </button>
  </div>
  
  <select [ngModel]="pageSize" (ngModelChange)="selectPageSize($event)">
    <option *ngFor="let size of pageSizes" [value]="size">{{ size }}</option>
  </select>


pagination.ts

import { outputAst } from '@angular/compiler';
import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';
import { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';
import { BehaviorSubject, Subject } from 'rxjs';


@Component({
  selector: 'app-pagination',
  templateUrl: './pagination.component.html',
  styleUrls: ['./pagination.component.css']
})
export class PaginationComponent implements OnInit
  
{
  @Input() total = 100;
  @Input() page = 1;
  @Input() pageSize = 10;

 @Output()
 pageemit=new EventEmitter();
 @Output()
 pagesizeemit=new EventEmitter();

  public totalPages!: number;
  public visiblePages!: number[];
  public visibleRangeLength:number=5;
  pageSizes: number[] = [5, 10, 25, 50];

  ngOnInit(): void {
    this.updateTotalPages();
    this.updateVisiblePages();
  }

  public selectPage(page: number): void {
   this.page=page;
  this.pageemit.emit(page);
    this.updateVisiblePages();
    
  }

  public selectPageSize(pageSize: string): void {
   this.pageSize=+pageSize;
   this.pagesizeemit.emit(pageSize);
    this.updateTotalPages();
    this.updateVisiblePages();
    
  }

  private updateVisiblePages(): void {
    const length = Math.min(this.totalPages, this.visibleRangeLength);


    const startIndex = Math.max(
      Math.min(
        this.page - Math.ceil(length / 2),
        this.totalPages - length
      ),
      0
    );

    this.visiblePages = Array.from(
      new Array(length).keys(),
      (item) => item + startIndex + 1
    );
  }

  private updateTotalPages(): void {
    this.totalPages = Math.ceil(this.total / this.pageSize);
  }
}



in this pagination component when i select 5 pagesize and then select any page other than 1 than itmes not getting correct i have done console.log items but it showing different items why
